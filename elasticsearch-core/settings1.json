
{
  "settings" : {
    "analysis" : {
      "analyzer" : {
        "pinyin_analyzer" : {
          "tokenizer" : "ik_smart",
          "filter":["my_pinyin"]
        }
      },
      "filter": {
        "my_pinyin" : {
          "type" : "pinyin",
          "keep_first_letter":true,
          "keep_separate_first_letter" : true,
          "keep_full_pinyin" : true,
          "keep_original" : false,
          "limit_first_letter_length" : 16,
          "lowercase" : true
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "productName": {
        "type": "text",
        "analyzer": "pinyin_analyzer",
        "fields": {
          "keyword_once_pinyin": {
            "type": "text",
            "analyzer": "pinyin_analyzer"
          }
        }
      }
    }
  }
}